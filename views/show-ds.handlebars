<!-- vim: set ft=html ts=2 sw=2 expandtab : -->
<h2>Data Set <small id="ds_id">{{ds._id}}</small> <small id="ds_name"></small> </h2>

<div id=recalc-alert class="col-sm-4 alert alert-danger hidden" role=alert>Done, force page reload (Shift-Reload) to see updated data! </div>

<div class="clearfix"></div>
<ul class="nav nav-pills" id=dsTabs role=tablist>
  <li role=presentation class=active><a href=#main id=main-tab role=tab data-toggle=tab aria-controls=main aria-expanded=true>Main</a></li>
  <li role=presentation><a href=#awr role=tab id=awr-tab data-toggle=tab aria-controls=awr>AWR files</a></li>
  <li role=presentation><a href=#hosts role=tab id=hosts-tab data-toggle=tab aria-controls=hosts>Hosts</a></li>
  <li role=presentation><a href=#databases role=tab id=dbs-tab data-toggle=tab aria-controls=databases>Databases</a></li>
</ul>
<div id=dsTabContent class=tab-content>

  <!-- Main tab -->
  <div role=tabpanel class="tab-pane fade in active" id=main aria-labelledby=main-tab> 
    <br/>

    <form class=form-horizontal action=/api/edit-ds method=post>
      <input type="hidden" id="ds-id" name="ds-id" value="{{ ds._id }}">
    
      <div class=form-group>
        <label for=ds-credttm class="col-sm-2 control-label">Created On</label>
        <div class=col-sm-10>
          <input type=text class=form-control id=ds-credttm name=ds-credttm value="{{ ds.createdOn }}" disabled>
        </div>
      </div>
    
      <div class=form-group>
        <label for=ds-name class="col-sm-2 control-label">Data Set Name</label>
        <div class=col-sm-10>
          <input type=text class=form-control id=ds-name name=ds-name value="{{ ds.name }}">
        </div>
      </div>
    
      <div class=form-group>
        <label for=ds-desc class="col-sm-2 control-label">Data Set Description</label>
        <div class=col-sm-10>
          <textarea class=form-control id=ds-desc name=ds-desc>{{ ds.desc }}</textarea>
        </div>
      </div>
    
      <div class=form-group>
        <div class="col-sm-offset-2 col-sm-10">
          <button type=submit class="btn btn-primary hidden" id=submit-ds >Update</button>
          <button type=button class="btn btn-danger" id=recalc-ds-btn data-calculate-text="Recalculating, please wait..." autocomplete=off>Recalculate</button>
        </div>
      </div>
    
    </form>

  </div> 
  <!-- End of main tab -->

  <!-- AWR tab -->
  <div role=tabpanel class="tab-pane fade" id=awr aria-labelledby=awr-tab>


    <!-- table with not assigned awr files -->
    <div id=not-assigned-wrapper class=hidden>
      <h3>Unassigned AWR files</h3>
      <table id=not-assigned-awrs-table class="table table-striped table-hover table-condensed" cellspacing=0 width=100%>
        <thead>
          <tr>
            <th>Id</th>
            <th>File name</th>
            <th>Upload date</th>
            <th>DB Name</th>
            <th>DB Id</th>
            <th>Instance</th>
            <th>Host</th>
            <th>Begin snapshot</th>
            <th>Begin time</th>
            <th>End snapshot</th>
            <th>End time</th>
          </tr>
        </thead>
      </table>
    </div>


    <!-- table with already assigned awr files -->
    <div id=assigned-wrapper>
      <h3>Assigned AWR files</h3>
      <table id="assigned-awrs-table" class="table table-striped table-hover table-condensed" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Id</th>
            <th>File name</th>
            <th>Upload date</th>
            <th>DB Name</th>
            <th>DB Id</th>
            <th>Instance</th>
            <th>Host</th>
            <th>Begin snapshot</th>
            <th>Begin time</th>
            <th>End snapshot</th>
            <th>End time</th>
          </tr>
        </thead>
      </table>
    </div>

  </div> 
  <!-- End of awr tab -->

  <!-- Hosts tab -->
  <div role=tabpanel class="tab-pane fade" id=hosts aria-labelledby=hosts-tab> 
    <br/>
    <form class=form-horizontal>
      <div class=form-group>
        <label for=host-sel class="col-sm-1 control-label">Host</label>
        <div class="col-sm-2">
          <select class=form-control id=host-sel>
          </select>
        </div>
      </div>
    </form>
    <div id="host-cpu-chart">
    </div>

    <div class="col-sm-4">
      <table id="host-info-table" class="table table-striped table-hover table-condensed" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Param</th>
            <th>Value</th>
          </tr>
        </thead>
      </table>
    </div>

  </div> 
  <!-- End of hosts tab -->

  <!-- Databases tab -->
  <div role=tabpanel class="tab-pane fade" id=databases aria-labelledby=dbs-tab> 
    <br/>
    <form class=form-horizontal>
      <div class=form-group>
        <label for=db-sel class="col-sm-1 control-label">Database</label>
        <div class="col-sm-2">
          <select class=form-control id=db-sel>
          </select>
        </div>
        <label for=inst-sel class="col-sm-1 control-label">Instance</label>
        <div class="col-sm-2">
          <select class=form-control id=inst-sel>
          </select>
        </div>
        <label for=db-chart-sel class="col-sm-1 control-label">Chart</label>
        <div class="col-sm-3">
          <select class=form-control id=db-chart-sel>
          </select>
        </div>
      </div>
    </form>
    <div id="db-chart">
    </div>

  </div> 
  <!-- End of databases tab -->


</div>




<script src="/public/js/ds-awr.js"></script>
<script src="/public/js/ds-recalc.js"></script>
<script src="/modules/bootstrap-menu/BootstrapMenu.js"></script>
<script src="/modules/d3/d3.min.js" charset="utf-8" type="text/javascript"></script>
<script src="/modules/c3/c3.js" type="text/javascript"></script>
<script src="/public/js/ds-hosts.js"></script>
<script src="/public/js/ds-databases.js"></script>
